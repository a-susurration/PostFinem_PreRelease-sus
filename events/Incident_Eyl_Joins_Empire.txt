#### Eyl joins the Empire ###
### By dat boi Chewy ###


namespace = incidents_eyl_join_empire
normal_or_historical_nations = yes

# Eyl considers entry
country_event = {
	id = incidents_eyl_join_empire.1
	title = "incidents_eyl_join_empire.1.t"
	desc = "incidents_eyl_join_empire.1.desc"
	picture = HRE_eventPicture
	
	major = yes
	
	trigger = {
		EYL = {
			
		}
	}
	
	option = {
		name = "incidents_eyl_join_empire.1.a"
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				has_opinion = {
					who = emperor
					value = 100
				}
			}
			modifier = {
				factor = 1.25
				NOT = { is_rival = emperor }
			}
			modifier = {
				factor = 1.25
				NOT = { emperor = { is_rival = ROOT } }
			}
		}
		custom_tooltip = eyl_asks_to_join_empire_tt
		emperor = {
			set_imperial_incident = incident_eyl_wants_to_join
		}
	}
	option = {
		name = "incidents_eyl_join_empire.1.b"
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				NOT = {
					has_opinion = {
						who = emperor
						value = 0
					}
				}
			}
			modifier = {
				factor = 1.25
				is_rival = emperor
			}
			modifier = {
				factor = 1.25
				emperor = { is_rival = ROOT }
			}
		}
		set_country_flag = eyl_refused_empire
	}
}

# Emperor considers Eyl's offer
country_event = {
	id = incidents_eyl_join_empire.2
	title = "incidents_eyl_join_empire.2.t"
	desc = "incidents_eyl_join_empire.2.desc"
	picture = HRE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "incidents_eyl_join_empire.2.a"
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				has_opinion = {
					who = EYL
					value = 100
				}
			}
			modifier = {
				factor = 0.5
				emperor = { is_rival = EYL }
			}
			modifier = {
				factor = 0.5
				EYL = { is_rival = emperor }
			}
			modifier = {
				factor = 2
				NOT = { emperor = { is_rival = EYL } }
			}
			modifier = {
				factor = 2
				NOT = { EYL = { is_rival = emperor } }
			}
		}
		EYL = {
			
			set_in_empire = yes
		}
	}
	
	option = {
		name = "incidents_eyl_join_empire.2.c"
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				NOT = {
					has_opinion = {
						who = emperor
						value = 0
					}
				}
			}
			modifier = {
				factor = 2
				is_rival = EYL
			}
			modifier = {
				factor = 2
				EYL = { is_rival = emperor }
			}
			modifier = {
				factor = 0
				alliance_with = EYL
			}
		}
		hidden_effect = {
			EYL = {
				country_event = {
					id = incidents_eyl_join_empire.4
					days = 5
				}
			}
		}
		tooltip = {
			EYL = {
				every_known_country = {
					limit = {
						is_elector = yes
						is_emperor = no
						NOT = { government = monarchy }
					}
					reverse_add_casus_belli = {
						target = EYL
						type = cb_vassalize_mission
						months = 480
					}
				}
				every_known_country = {
					limit = {
						is_elector = yes
						is_emperor = no
						government = monarchy
					}
					reverse_add_casus_belli = {
						target = EYL
						type = cb_restore_personal_union
						months = 480
					}
				}
			}
		}
	}
}

# Eyl is refused Imperial membership
country_event = {
	id = incidents_eyl_join_empire.4
	title = "incidents_eyl_join_empire.4.t"
	desc = "incidents_eyl_join_empire.4.desc"
	picture = BAD_WITH_MONARCH_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "incidents_eyl_join_empire.4.a"
		ai_chance = {
			factor = 1
		}
		every_known_country = {
			limit = {
				is_elector = yes
				is_emperor = no
				government = monarchy
			}
			reverse_add_casus_belli = {
				target = EYL
				type = cb_restore_personal_union
				months = 480
			}
		}
		every_known_country = {
			limit = {
				is_elector = yes
				is_emperor = no
				NOT = { government = monarchy }
			}
			reverse_add_casus_belli = {
				target = EYL
				type = cb_vassalize_mission
				months = 480
			}
		}
		add_opinion = {
			who = emperor
			modifier = eyl_refused_membership_opinion
		}
		reverse_add_opinion = {
			who = emperor
			modifier = eyl_refused_membership_opinion
		}
		set_country_flag = eyl_refused_empire
	}
}